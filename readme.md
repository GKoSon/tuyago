方案计划书

零、背景介绍
	完成以下步骤才可以领取到三明治开发板哦~
	0、进群后请修改昵称【岗位-开发年限-昵称】
	1、登录：https://auth.tuya.com/register?_source=7b811ac2e872ccb62376ba4dfe0568eb 注册Iot账号 
	2、点击创建产品，找到【小家电】-【宠物喂食器】，选择【wifi+蓝牙】通信协议，填写产品名称，创建产品。 【名称 KosonHome 型号 motor】
	3、填写表单：https://survey.tuyacn.com/survey/q8ywvbqc
	4、根据《三明治开发套件领取流程》：https://shimo.im/docs/qCgdXjVPYqjdDWj3/ 提交开发计划书
	有任何问题，群内可以直接沟通哦~
一、方案标题
	宠物喂食器

二、方案应用场景
	地点：个人居所
	功能：利用物联网技术,控制/检测居家宠物或绿植的饮水饮食

三、开发计划
	4月30前完成.
	1）3月25前准备物料
	2）3月25-4月25日嵌入式开发、云开发
	3）4月30日前整体调试,输出项目技术文档。
四、技术细节

　　宠物喂食器主要包括主控电路，以及分别与该主控电路耦合的电机驱动电路、振动检测电路、称重电路、温湿度检测电路、WIFI入网电路、按键电路。

　　电机驱动电路---包括电机驱动板U1及其外围电路，电机驱动板的型号为ULN2003，
    其Pin1-4脚分别一一耦合单片机的Pin34-31脚，其电源输入端接5V电压，并在电源输入端和接地端之间耦合一电容，该电容容量为0.1μF。
	电机驱动板控制输出端耦合电机，通过单片机输出电平信号转为驱动电机，电机用于控制出食口的启闭，因而可以控制食物输出量。

　　振动检测电路---在盛食盘下方，用于检测盛食盘的振动情况，再根据振动情况判断宠物是否处于进食状态。
    振动检测电路包括滤波电容、电源指示灯、限流电阻、振动传感器、电压比较器、可调电阻、上拉电阻和输出指示灯，其中的电压比较器采用LM393型号。
	滤波电容耦合在电源端和接地端之间，用于提高振动传感器和电压比较器稳定性;电源指示灯耦合在电源端和接地端之间，用于提示电源接通，电路通路;
	限流电阻一端接电源端，另一端接振动传感器和电压比较器反相端，可调电阻一端接电源，
	另一端接振动传感器，动触点接电压比较器同相端，上拉电阻和输出指示灯接电压比较器输出端，电压比较器输出端与单片机Pin2脚耦合。
	当震动传感器检测到振动时，振动传感器对接地端有一个细微的压差上升，从而使得电压比较器反向端电压提高，高于同向端时，电压比较器向单片机输出低电平信号，
	同时输出指示灯变亮，单片机记录低电平时间，并判断此刻宠物处于进食状态;
	当无振动时，电压比较器向单片机输出高电位信号，同时输出指示灯不亮，单片机记录高电平时间，并判断此刻宠物处于非进食状态。

　　称重电路---包括惠更斯电桥、HX711型A/D转换器芯片及其外围电路，Q2为PNP型三极管，做为输入到惠更斯电桥的开关使用，
    当HX711的2脚输出“高电位”PNP管导通，导致惠更斯电桥4脚对3脚产生电压差。
	R10为20K，R11为8.2K目的是为了分压反馈到HX711的调节端口(第四脚)。
	当电压过高时，通过第四脚分压检测，调节第二脚暂停输出“高电位”，当电压过低时，第二脚输出“高电位”。从而达到一个稳定预设的电压值。

　　温湿度检测电路---温湿度传感器，该温湿度传感器的型号为DHT11，其信号输出端与单片机Pin19脚耦合。

　　WIFI入网电路---WIFI芯片，该WIFI芯片的型号为ESP8266，其信号输出端分别与单片机Pin21和Pin22耦合。
    单片机数据通过WIFI芯片接入互联网，用户可通过互联网随时随地的查看单片机数据，比如宠物进食时间，进食量，以及所在环境的湿度、温度。

　　按键电路---用于设置确认的第一按键key1，用于设置食量加的第二按键key2，用于设置食量减的第三按键key3，用于设置时间间隔加的第四按键key4，
    用于设置时间间隔减的第五按键key5，以及用于开启WIFI入网电路的第六按键key6。	

